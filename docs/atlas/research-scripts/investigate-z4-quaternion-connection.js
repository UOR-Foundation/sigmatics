#!/usr/bin/env node
/**
 * Investigation: ℝ[ℤ₄] and Quaternion Connection
 *
 * Explores whether ℝ[ℤ₄] (group algebra, dimension 4) has a deep
 * connection to ℍ (quaternions, dimension 4).
 *
 * Key questions:
 * - Is ℝ[ℤ₄] a quotient or projection of ℍ?
 * - Does the 4-fold R transform correspond to quaternion structure?
 * - What is the relationship between cyclic order-4 and quaternion units?
 */

console.log('================================================================');
console.log('ℝ[ℤ₄] and Quaternion Connection Investigation');
console.log('================================================================\n');

// ============================================================================
// Part 1: Structure Comparison
// ============================================================================

console.log('Part 1: Comparing ℝ[ℤ₄] and ℍ');
console.log('----------------------------------------------------------------\n');

const rz4 = {
  name: 'ℝ[ℤ₄]',
  description: 'Group algebra of cyclic group ℤ₄',
  dimension: 4,
  basis: ['1', 'g', 'g²', 'g³'],
  multiplication: 'g⁴ = 1 (cyclic)',
  commutative: true,
  associative: true,
  notes: 'Generated by single element g of order 4',
};

const quaternions = {
  name: 'ℍ',
  description: 'Quaternions',
  dimension: 4,
  basis: ['1', 'i', 'j', 'k'],
  multiplication: 'i²=j²=k²=ijk=-1',
  commutative: false,
  associative: true,
  notes: 'Generated by i, j, k with non-commutative relations',
};

console.log('ℝ[ℤ₄] (Group Algebra):');
console.log(`  Dimension: ${rz4.dimension}`);
console.log(`  Basis: ${rz4.basis.join(', ')}`);
console.log(`  Multiplication: ${rz4.multiplication}`);
console.log(`  Commutative: ${rz4.commutative ? 'YES' : 'NO'}`);
console.log(`  Associative: ${rz4.associative ? 'YES' : 'NO'}\\n`);

console.log('ℍ (Quaternions):');
console.log(`  Dimension: ${quaternions.dimension}`);
console.log(`  Basis: ${quaternions.basis.join(', ')}`);
console.log(`  Multiplication: ${quaternions.multiplication}`);
console.log(`  Commutative: ${quaternions.commutative ? 'YES' : 'NO'}`);
console.log(`  Associative: ${quaternions.associative ? 'YES' : 'NO'}\\n`);

console.log('Comparison:');
console.log('  ✓ Both dimension 4');
console.log('  ✓ Both associative');
console.log('  ✗ ℝ[ℤ₄] commutative, ℍ non-commutative');
console.log('  ✗ ℝ[ℤ₄] cyclic (1 generator), ℍ non-cyclic (3 generators)\\n');

console.log('Key difference:');
console.log('  ℝ[ℤ₄] = abelian (commutative) group algebra');
console.log('  ℍ = non-abelian division algebra\\n');

// ============================================================================
// Part 2: The Quaternion Group Q₈
// ============================================================================

console.log('Part 2: The Quaternion Group Q₈');
console.log('----------------------------------------------------------------\n');

console.log('Quaternion group Q₈ = {±1, ±i, ±j, ±k}:');
console.log('  Order: 8 elements');
console.log('  Generators: i, j (k = ij)');
console.log('  Relations: i² = j² = k² = ijk = -1');
console.log('  Center: {±1}\\n');

console.log('Q₈ vs ℤ₄:');
console.log('  Q₈: Order 8, non-abelian');
console.log('  ℤ₄: Order 4, abelian (cyclic)\\n');

console.log('Observation:');
console.log('  Q₈ has a ℤ₄ subgroup: {1, i, -1, -i}');
console.log('  This is cyclic of order 4 (generated by i)');
console.log('  Similarly: {1, j, -1, -j} and {1, k, -1, -k}\\n');

console.log('So Q₈ contains THREE copies of ℤ₄!\\n');

console.log('Could ℝ[ℤ₄] be related to a ℤ₄ subgroup of Q₈?\\n');

// ============================================================================
// Part 3: Quotients and Projections
// ============================================================================

console.log('Part 3: Quotients and Projections');
console.log('----------------------------------------------------------------\n');

console.log('Can we get ℝ[ℤ₄] from ℍ via quotient?\\n');

console.log('Option 1: Abelianization');
console.log('  ℍ / [ℍ, ℍ] (quotient by commutator subgroup)');
console.log('  This makes everything commutative');
console.log('  But ℍ as an algebra has no commutator subgroup (not a group!)\\n');

console.log('Option 2: Center projection');
console.log('  Center of Q₈ = {±1}');
console.log('  Q₈ / {±1} ≅ Klein four-group V₄ ≅ ℤ₂ × ℤ₂');
console.log('  Not ℤ₄!\\n');

console.log('Option 3: Restrict to cyclic subgroup');
console.log('  Take {1, i, -1, -i} ⊂ Q₈');
console.log('  This IS ℤ₄ (cyclic of order 4)');
console.log('  Group algebra: ℝ[{1, i, -1, -i}] ≅ ℝ[ℤ₄] ✓\\n');

console.log('Conclusion:');
console.log('  ℝ[ℤ₄] can be seen as restriction to a cyclic ℤ₄ subgroup');
console.log('  of the quaternion group Q₈\\n');

console.log('But wait - ℍ ≠ Q₈!');
console.log('  ℍ is infinite-dimensional vector space over ℝ');
console.log('  Q₈ is finite group of order 8');
console.log('  Q₈ ⊂ ℍ (unit quaternions of specific form)\\n');

// ============================================================================
// Part 4: The Key Insight - Cyclic vs Non-Cyclic
// ============================================================================

console.log('Part 4: Cyclic Order-4 vs Quaternion 4-Fold Structure');
console.log('----------------------------------------------------------------\n');

console.log('ℤ₄ structure (cyclic):');
console.log('  g⁰ = 1');
console.log('  g¹ = g');
console.log('  g² = g·g');
console.log('  g³ = g·g·g');
console.log('  g⁴ = 1 (cycle closes)\\n');

console.log('This is LINEAR: 1 → g → g² → g³ → 1\\n');

console.log('Quaternion structure (4-fold):');
console.log('  i² = -1, i⁴ = 1');
console.log('  j² = -1, j⁴ = 1');
console.log('  k² = -1, k⁴ = 1\\n');

console.log('This is NON-LINEAR: Three independent 4-fold generators!');
console.log('  i: 1 → i → -1 → -i → 1');
console.log('  j: 1 → j → -1 → -j → 1');
console.log('  k: 1 → k → -1 → -k → 1\\n');

console.log('Key difference:');
console.log('  ℤ₄: ONE cycle of order 4');
console.log('  ℍ: THREE cycles of order 4 (plus interactions ij=k, etc.)\\n');

console.log('Atlas R transform:');
console.log('  R: Quadrant rotation (h₂ component)');
console.log('  R⁴ = identity');
console.log('  This is ONE 4-fold cycle → ℤ₄-like ✓\\n');

console.log('Conclusion:');
console.log('  ℝ[ℤ₄] captures ONE 4-fold rotation');
console.log('  ℍ captures THREE independent 4-fold rotations\\n');

console.log('ℝ[ℤ₄] is like a "1-dimensional quaternion" - just ONE of the three i,j,k!\\n');

// ============================================================================
// Part 5: Atlas Quadrant Structure
// ============================================================================

console.log('Part 5: Atlas Quadrant Structure and ℤ₄');
console.log('----------------------------------------------------------------\n');

console.log('Atlas rank-1 elements: r^h ⊗ e_ℓ ⊗ τ^d');
console.log('  h ∈ {0,1,2,3}: Quadrant index\\n');

console.log('R transform action:');
console.log('  R: h ↦ (h+1) mod 4');
console.log('  R²: h ↦ (h+2) mod 4');
console.log('  R³: h ↦ (h+3) mod 4');
console.log('  R⁴: h ↦ h (identity)\\n');

console.log('This is EXACTLY ℤ₄ action!');
console.log('  r⁰ (h=0), r¹ (h=1), r² (h=2), r³ (h=3)');
console.log('  Multiplication: r^a · r^b = r^{(a+b) mod 4}\\n');

console.log('Mapping to ℝ[ℤ₄]:');
console.log('  1   ↔ r⁰ (h=0, no rotation)');
console.log('  g   ↔ r¹ (h=1, 90° rotation)');
console.log('  g²  ↔ r² (h=2, 180° rotation)');
console.log('  g³  ↔ r³ (h=3, 270° rotation)\\n');

console.log('Perfect correspondence! ✓\\n');

console.log('But what about quaternions?\\n');

console.log('Quaternion interpretation attempt:');
console.log('  Could we map r^h to quaternion unit i^h?');
console.log('  i⁰ = 1, i¹ = i, i² = -1, i³ = -i\\n');

console.log('Problem:');
console.log('  i² = -1 (not a "basis vector")');
console.log('  In ℝ[ℤ₄], g² is just another basis element');
console.log('  In ℍ, i² = -1 is a SCALAR\\n');

console.log('This mismatch shows ℝ[ℤ₄] ≠ ℍ!\\n');

// ============================================================================
// Part 6: The Deeper Connection - SO(3) vs ℤ₄
// ============================================================================

console.log('Part 6: Rotational Structure');
console.log('----------------------------------------------------------------\n');

console.log('Unit quaternions form SU(2):');
console.log('  {a + bi + cj + dk : a²+b²+c²+d² = 1}');
console.log('  SU(2) is the double cover of SO(3)');
console.log('  Encodes 3D rotations\\n');

console.log('ℤ₄ is cyclic group:');
console.log('  Encodes 2D rotations by multiples of 90°');
console.log('  This is a SUBGROUP of SO(2) (circle group)\\n');

console.log('Dimensional comparison:');
console.log('  SO(3): 3-dimensional Lie group');
console.log('  SO(2): 1-dimensional Lie group');
console.log('  ℤ₄ ⊂ SO(2) ⊂ SO(3)\\n');

console.log('Key insight:');
console.log('  ℍ (via SU(2)) encodes FULL 3D rotations');
console.log('  ℤ₄ encodes discrete 2D rotations (4-fold symmetry)\\n');

console.log('Atlas quadrant structure is 4-fold 2D rotation,');
console.log('not full 3D quaternionic rotation!\\n');

// ============================================================================
// Part 7: Why ℝ[ℤ₄] Not ℍ?
// ============================================================================

console.log('Part 7: Why ℝ[ℤ₄] Instead of ℍ?');
console.log('----------------------------------------------------------------\n');

console.log('If Atlas used ℍ instead of ℝ[ℤ₄]:\\n');

console.log('Tensor product would be:');
console.log('  Cl₀,₇ ⊗ ℍ ⊗ ℝ[ℤ₃]');
console.log('  = (128) × (4) × (3) = 1,536 dimensions ✓ (same!)\\n');

console.log('But structural issues:\\n');

console.log('1. Commutativity mismatch:');
console.log('   Cl₀,₇: Anti-commutative (e_i e_j = -e_j e_i)');
console.log('   ℍ: Non-commutative (ij = -ji)');
console.log('   ℝ[ℤ₄]: Commutative\\n');

console.log('   Tensor product Cl₀,₇ ⊗ ℍ would have');
console.log('   DOUBLE non-commutativity - very complex!\\n');

console.log('2. Rank-1 basis interpretation:');
console.log('   r^h ⊗ e_ℓ ⊗ τ^d');
console.log('   If r^h ∈ ℍ, then r² = -1 (not a basis element!)');
console.log('   This breaks the rank-1 tensor product structure\\n');

console.log('3. Minimality:');
console.log('   ℝ[ℤ₄] is the MINIMAL 4-dimensional algebra');
console.log('   with a 4-fold cyclic structure');
console.log('   ℍ has extra structure (i, j, k interactions)\\n');

console.log('Conclusion:');
console.log('  ℝ[ℤ₄] is CORRECT for Atlas');
console.log('  ℍ would add unnecessary complexity\\n');

console.log('ℝ[ℤ₄] is the "abelianized quaternions"');
console.log('- keeps 4-fold structure');
console.log('- removes non-commutativity\\n');

// ============================================================================
// Part 8: The Connection Revealed
// ============================================================================

console.log('Part 8: The True Connection');
console.log('----------------------------------------------------------------\n');

console.log('ℝ[ℤ₄] and ℍ are related as:\\n');

console.log('Quaternions ℍ:');
console.log('  Full structure: THREE 4-fold generators (i, j, k)');
console.log('  Non-commutative: ij = k, ji = -k');
console.log('  Captures: 3D rotations (via SU(2))\\n');

console.log('ℝ[ℤ₄]:');
console.log('  Restricted structure: ONE 4-fold generator (g)');
console.log('  Commutative: abelian group algebra');
console.log('  Captures: 2D discrete rotations (4-fold symmetry)\\n');

console.log('Relationship:');
console.log('  ℝ[ℤ₄] ≅ ℝ[⟨i⟩] ⊂ ℝ[Q₈]');
console.log('  where ⟨i⟩ = {1, i, -1, -i} is cyclic subgroup of Q₈\\n');

console.log('In other words:');
console.log('  ℝ[ℤ₄] is the group algebra of ONE of the three');
console.log('  ℤ₄ subgroups inside the quaternion group Q₈\\n');

console.log('Atlas uses ℝ[ℤ₄] because:');
console.log('  1. Need 4-fold structure (quadrants)');
console.log('  2. Need commutativity (for clean tensor product)');
console.log('  3. Need minimality (no extra i,j,k interactions)\\n');

console.log('ℝ[ℤ₄] is the "projection" of ℍ to its cyclic ℤ₄ component!\\n');

// ============================================================================
// Summary
// ============================================================================

console.log('================================================================');
console.log('SUMMARY: ℝ[ℤ₄] and Quaternion Connection');
console.log('================================================================\\n');

console.log('✓ Both dimension 4');
console.log('✓ Both have 4-fold structure');
console.log('✓ ℝ[ℤ₄] ≅ restriction to cyclic ℤ₄ subgroup of Q₈ ⊂ ℍ\\n');

console.log('Differences:');
console.log('✗ ℝ[ℤ₄] commutative, ℍ non-commutative');
console.log('✗ ℝ[ℤ₄] has ONE 4-fold generator, ℍ has THREE\\n');

console.log('Why Atlas uses ℝ[ℤ₄] not ℍ:');
console.log('  1. Commutativity needed for clean tensor product');
console.log('  2. Minimality - no extra structure');
console.log('  3. Captures 4-fold quadrant rotation (not full 3D rotations)\\n');

console.log('Connection formula:');
console.log('  ℝ[ℤ₄] ≅ ℝ[⟨i⟩] where ⟨i⟩ ⊂ Q₈ ⊂ ℍ\\n');

console.log('Interpretation:');
console.log('  ℝ[ℤ₄] is "abelianized quaternions"');
console.log('  ℝ[ℤ₄] is "1-dimensional quaternions" (just ONE of i, j, k)');
console.log('  ℝ[ℤ₄] is "minimal 4-fold structure"\\n');

console.log('In the primitive correspondence:');
console.log('  ℍ (quaternions) → Full 3D rotational structure (dim 4)');
console.log('  ℝ[ℤ₄] → Discrete 2D rotational structure (dim 4)\\n');

console.log('Atlas rank-1 uses ℝ[ℤ₄] because quadrants are');
console.log('2D rotational symmetry, not full 3D quaternionic rotations!\\n');

console.log('This is consistent with primitive correspondence:');
console.log('  Each primitive appears in MINIMAL form in Atlas\\n');

console.log('================================================================');
console.log('END INVESTIGATION');
console.log('================================================================\\n');
